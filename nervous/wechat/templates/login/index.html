{% load staticfiles %}
<!DOCTYPE html>
<html lang="en" class="no-js">

<head>

    <meta charset="utf-8">

    <!-- Uikit for navbar -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" href="/static/uikit/uikit.css">


    <!-- CSS -->
    <link rel="stylesheet" href="{% static 'login/css/reset.css' %}">
    <link rel="stylesheet" href="{% static 'login/css/supersized.css' %}">
    <link rel="stylesheet" href="{% static 'login/css/style.css' %}">

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
        <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Javascript -->
    <script src="{% static 'login/js/jquery-1.8.2.min.js' %}"></script>
    <script src="{% static 'login/js/supersized.3.2.7.min.js' %}"></script>
    <script src="{% static 'login/js/supersized-init.js' %}"></script>
    <script src="{% static 'login/js/scripts.js' %}"></script>
    <script src="{% static 'md5/md5.js' %}"></script>
    <script type="text/javascript">
        function form_submit() {

            var form = document.forms["login_form"];
            var account = form['account'];
            var password = form['password'];

            {% if identity == 'student' %}
                alert("studnet");
                var re = /\d{10}/;
                if (!re.test(account.value)) {
                    alert("请输入合法的学生号");
                    return;
                }
                form.submit();
            {% elif identity == 'admin' %}
                var form2 = document.forms["login_form"];

                form2['password'].value = hex_md5(form2['password'].value);
                form2.submit();
                return;
            {% elif identity == 'superuser' %}
                var form2 = document.forms["login_form"];

                form2['password'].value = hex_md5(form2['password'].value);
                form2.submit();
                return;
            {% endif %}

        }
    </script>

    <title>请登录</title>


</head>


<body>

<nav class="uk-navbar">
    <ul class="uk-navbar-nav">
        <li class="
			{% if identity == 'student' %}
			uk-active
			{% else %}
			uk-parent
			{% endif %}
			"><a href="/login/student">Student</a></li>
        <li class="
			{% if identity == 'admin' %}
			uk-active
			{% else %}
			uk-parent
			{% endif %}
			"><a href="/login/admin">Admin</a></li>
        <li class="
			{% if identity == 'superuser' %}
			uk-active
			{% else %}
			uk-parent
			{% endif %}
			"><a href="/login/superuser">Superuser</a></li>
    </ul>
</nav>
</nav>

<div class="page-container">
    <h1>
        {% if identity == 'student' %}
            请登录
        {% elif identity == 'admin' %}
            欢迎 管理员 ，请登录
        {% elif identity == 'superuser' %}
            欢迎 超级管理员 ，请登录
        {% else %}
            对不起,似乎出了点问题...
        {% endif %}
    </h1>

    <form id="login_form" action="/api/login/{{ identity }}" method="post" onsubmit="submitform();">
        {% csrf_token %}
        <input type="text" name="account" class="username" placeholder="用户名">
        <input type="password" name="password" class="password" placeholder="密码">
        <button type="submit" onclick="form_submit();">提交</button>
        <div class="error"><span>+</span></div>
    </form>
</div>


</body>

</html>
